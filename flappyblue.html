<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Flappy Blue</title>

<style>
:root{
  --bg-top:#cfe9ff;
  --bg-bottom:#6fb8ff;
  --text:#022c52;
  font-family: Inter, system-ui, sans-serif;
}

html,body{
  height:100%;
  margin:0;
  background:linear-gradient(180deg,var(--bg-top),var(--bg-bottom));
  display:flex;
  align-items:center;
  justify-content:center;
}

.card{
  width:360px;
  border-radius:16px;
  overflow:hidden;
  box-shadow:0 12px 40px rgba(12,40,80,0.25);
  background:linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));
  backdrop-filter:blur(6px);
  position:relative;
}

header{
  position:absolute;
  top:10px;
  left:12px;
  right:12px;
  display:flex;
  justify-content:space-between;
  z-index:10;
}

h1{
  margin:0;
  font-size:18px;
  background:white;
  padding:6px 10px;
  border-radius:8px;
  color:var(--text);
}

canvas{
  display:block;
  width:100%;
  height:auto;
  background:linear-gradient(180deg,#bfe4ff,#8ed0ff);
}

.hud{
  position:absolute;
  top:0;
  left:0;
  right:0;
  display:flex;
  justify-content:center;
  pointer-events:none;
  z-index:9;
}

.scoreBox{
  margin-top:12px;
  background:white;
  padding:6px 14px;
  border-radius:999px;
  font-weight:800;
  font-size:24px;
  color:var(--text);
}

.highBox{
  position:absolute;
  right:12px;
  top:12px;
  background:white;
  padding:6px 10px;
  border-radius:10px;
  font-weight:700;
}

.centerOverlay{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:8;
}

.message{
  background:white;
  border-radius:16px;
  padding:20px 28px;
  text-align:center;
  box-shadow:0 6px 20px rgba(12,40,80,.3);
}

#stateTitle{
  font-size:22px;
  font-weight:800;
}

#stateHint{
  font-size:14px;
  opacity:.8;
  margin-top:6px;
}

footer{
  position:absolute;
  bottom:6px;
  left:0;
  right:0;
  text-align:center;
  font-size:12px;
  opacity:.7;
}
</style>
</head>

<body>
<div class="card">
  <header><h1>Flappy Blue</h1></header>

  <canvas id="game" width="360" height="640"></canvas>

  <div class="hud">
    <div id="scoreBox" class="scoreBox">0</div>
    <div id="highBox" class="highBox">HS: 0</div>
  </div>

  <div class="centerOverlay" id="overlay">
    <div class="message">
      <div id="stateTitle">Flappy Blue</div>
      <div id="stateHint">Click or Press Space to Start</div>
    </div>
  </div>

  <footer>By V</footer>
</div>

<script>
const canvas = document.getElementById('game');
const ctx = canvas.getContext('2d');

let score = 0;
let highScore = 0;
let running = false;

const gravity = 0.6;
const jump = -10;
const speed = 3;

let bird, pipes;

const scoreBox = document.getElementById('scoreBox');
const highBox = document.getElementById('highBox');
const overlay = document.getElementById('overlay');
const stateTitle = document.getElementById('stateTitle');
const stateHint = document.getElementById('stateHint');

function resetGame(){
  bird = { x:50, y:150, r:12, dy:0 };
  pipes = [];
  score = 0;
}

function spawnPipe(){
  const top = Math.random()*200 + 50;
  const gap = 140;
  pipes.push({
    x:canvas.width,
    w:60,
    top,
    bottom:canvas.height - top - gap,
    passed:false
  });
}

function drawBackground(){
  const g = ctx.createLinearGradient(0,0,0,canvas.height);
  g.addColorStop(0,"#cfe9ff");
  g.addColorStop(1,"#6fb8ff");
  ctx.fillStyle = g;
  ctx.fillRect(0,0,canvas.width,canvas.height);
}

function drawBird(){
  ctx.fillStyle="white";
  ctx.beginPath();
  ctx.arc(bird.x,bird.y,bird.r,0,Math.PI*2);
  ctx.fill();
  ctx.strokeStyle="#004aad";
  ctx.lineWidth=2;
  ctx.stroke();
}

function drawPipes(){
  pipes.forEach(p=>{
    ctx.fillStyle="#1e5cb8";
    ctx.fillRect(p.x,0,p.w,p.top);
    ctx.fillRect(p.x,canvas.height-p.bottom,p.w,p.bottom);
  });
}

function update(){
  bird.dy += gravity;
  bird.y += bird.dy;

  if(!pipes.length || pipes[pipes.length-1].x < canvas.width-200)
    spawnPipe();

  pipes.forEach(p=>p.x -= speed);
  if(pipes[0].x + pipes[0].w < 0) pipes.shift();

  pipes.forEach(p=>{
    if(!p.passed && p.x+p.w < bird.x){
      p.passed=true;
      score++;
    }
  });

  if(bird.y-bird.r<=0 || bird.y+bird.r>=canvas.height) return endGame();

  for(const p of pipes){
    const hitX = bird.x+bird.r>p.x && bird.x-bird.r<p.x+p.w;
    const hitY = bird.y-bird.r<p.top || bird.y+bird.r>canvas.height-p.bottom;
    if(hitX && hitY) return endGame();
  }

  drawBackground();
  drawPipes();
  drawBird();

  scoreBox.textContent = score;
  highBox.textContent = "HS: " + highScore;
}

function loop(){
  if(!running) return;
  update();
  requestAnimationFrame(loop);
}

function endGame(){
  running=false;
  overlay.style.display="flex";
  stateTitle.textContent="Game Over";
  stateHint.textContent="Score: " + score;
  if(score>highScore) highScore=score;
}

function flap(){
  if(!running){
    resetGame();
    overlay.style.display="none";
    running=true;
    requestAnimationFrame(loop);
  }
  bird.dy = jump;
}

document.addEventListener("keydown",e=>{
  if(e.code==="Space"){
    e.preventDefault();
    flap();
  }
});

canvas.addEventListener("click",flap);
canvas.addEventListener("touchstart",flap,{passive:true});
</script>
</body>
</html>
